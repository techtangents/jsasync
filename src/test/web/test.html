<html>
<head>
    <script src="../../../lib/test/jquery-latest.js"></script>
    <script type='text/javascript' src='../../../lib/test/qunit-git.js'></script>
    <link rel="stylesheet" type="text/css" href="../../../lib/test/qunit-git.css"/>

    <script type='text/javascript' src='../../../lib/run/javascriptcore.js'></script>
    <script type='text/javascript' src='../../../src/main/js/jsasync.js'></script>
    <script type='text/javascript'>
        var Async = techtangents.jsasync.api.auto.Async;
        var Bsync = techtangents.jsasync.api.auto.Bsync;

        $(document).ready(function() {
            asyncTest("async sanity test", function() {
                var as = Async.async(function(a, callback) {
                    setTimeout(function() {
                        callback(a + 4);
                    }, 50);
                });

                as(7)(function(b) {
                    equal(b, 11);
                    start();
                });
            });

            asyncTest("bsync pass sanity test", function() {
                var bs = Bsync.bsync(function(a, passCb, failCb) {
                    setTimeout(function() {
                        passCb(String(a));
                    }, 17);
                });
                bs(7)(function(p) {
                    setTimeout(function() {
                        equal("7", p);
                        start();
                    }, 47);
                }, function(f) {
                    setTimeout(function() {
                        throw "tantrum";
                    }, 64);
                });

            });

        });
    </script>

</head>
<body>
<h1 id="qunit-header">QUnit example</h1>
<h2 id="qunit-banner"></h2>

<div id="qunit-testrunner-toolbar"></div>
<h2 id="qunit-userAgent"></h2>
<ol id="qunit-tests"></ol>
<div id="qunit-fixture"></div>
</body>
</html>